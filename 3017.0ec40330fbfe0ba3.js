"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3017],{3017:(P,d,i)=>{i.r(d),i.d(d,{SignupPageModule:()=>M});var c=i(177),g=i(4341),s=i(4742),p=i(8986),m=i(467),e=i(4438),h=i(1626),S=i(671);function f(n,u){if(1&n){const r=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td",7)(6,"ion-button",9),e.bIt("click",function(){const t=e.eBV(r).$implicit,a=e.XpG();return e.Njj(a.confirmDelete(t.id))}),e.EFF(7," \u5220\u9664 "),e.k0s()()()}if(2&n){const r=u.$implicit;e.R7$(2),e.JRh(r.username),e.R7$(2),e.JRh(r.password)}}const F=[{path:"",component:(()=>{var n;class u{constructor(o,t,a,l){this.router=o,this.http=t,this.alertController=a,this.authService=l,this.users=[],this.username="",this.password=""}ngOnInit(){this.loadUsers()}loadUsers(){this.http.get("http://localhost:3000/api/users").subscribe(o=>{this.users=o})}onSignup(){this.http.post("http://localhost:3000/api/signup",{username:this.username,password:this.password}).subscribe(t=>{console.log("Signup successful",t),this.loadUsers(),this.authService.prompt("\u6210\u529f\u6ce8\u518c\u65b0\u7528\u6237 (\u7528\u6237\u540d:"+this.username+" \u5bc6\u7801:"+this.password+")")},t=>{console.error("Signup failed",t),this.authService.prompt("\u6ce8\u518c\u7528\u6237\u5931\u8d25!")})}deleteUser(o){this.authService.deleteUser(o).subscribe(t=>{console.log("User deleted:",t),this.users=this.users.filter(a=>a.id!==o)},t=>{console.error("Error deleting user:",t)})}confirmDelete(o){var t=this;return(0,m.A)(function*(){yield(yield t.alertController.create({message:"\u786e\u8ba4\u8981\u5220\u9664\u5417\uff1f",buttons:[{text:"\u53d6\u6d88",role:"cancel"},{text:"\u786e\u5b9a",handler:()=>{t.deleteUser(o)}}]})).present()})()}}return(n=u).\u0275fac=function(o){return new(o||n)(e.rXU(p.Ix),e.rXU(h.Qq),e.rXU(s.hG),e.rXU(S.u))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-signup"]],decls:31,vars:3,consts:[["color","primary"],[1,"ion-padding"],[3,"ngSubmit"],["position","floating"],["type","text","name","username","required","",3,"ngModelChange","ngModel"],["type","password","name","password","required","",3,"ngModelChange","ngModel"],["expand","full","type","submit"],[1,"button"],[4,"ngFor","ngForOf"],["color","danger",3,"click"]],template:function(o,t){1&o&&(e.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),e.EFF(3,"\u5e10\u6237"),e.k0s()()(),e.j41(4,"ion-content",1)(5,"form",2),e.bIt("ngSubmit",function(){return t.onSignup()}),e.j41(6,"h2"),e.EFF(7,"\u6ce8\u518c\u5e10\u6237:"),e.k0s(),e.j41(8,"ion-item")(9,"ion-label",3),e.EFF(10,"\u7528\u6237\u540d"),e.k0s(),e.j41(11,"ion-input",4),e.mxI("ngModelChange",function(l){return e.DH7(t.username,l)||(t.username=l),l}),e.k0s()(),e.j41(12,"ion-item")(13,"ion-label",3),e.EFF(14,"\u5bc6\u7801"),e.k0s(),e.j41(15,"ion-input",5),e.mxI("ngModelChange",function(l){return e.DH7(t.password,l)||(t.password=l),l}),e.k0s()(),e.j41(16,"ion-button",6),e.EFF(17,"\u6ce8\u518c"),e.k0s()(),e.j41(18,"div")(19,"h2"),e.EFF(20,"\u7528\u6237\u6570\u636e:"),e.k0s(),e.j41(21,"table")(22,"thead")(23,"tr")(24,"th"),e.EFF(25,"\u7528\u6237\u540d"),e.k0s(),e.j41(26,"th"),e.EFF(27,"\u6563\u5217\u5bc6\u7801"),e.k0s(),e.nrm(28,"th",7),e.k0s()(),e.j41(29,"tbody"),e.DNE(30,f,8,2,"tr",8),e.k0s()()()()),2&o&&(e.R7$(11),e.R50("ngModel",t.username),e.R7$(4),e.R50("ngModel",t.password),e.R7$(15),e.Y8G("ngForOf",t.users))},dependencies:[c.Sq,g.qT,g.BC,g.cb,g.YS,g.vS,g.cV,s.Jm,s.W9,s.eU,s.$w,s.uz,s.he,s.BC,s.ai,s.Gw],styles:["table[_ngcontent-%COMP%]{width:96%;border-collapse:collapse;margin:20px 25px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}th[_ngcontent-%COMP%]{background-color:var(--ion-color-light-contrast);opacity:.5;color:var(--ion-color-primary-contrast)}.button[_ngcontent-%COMP%]{padding-right:0;padding-left:0;text-align:center}"]}),u})()}];let C=(()=>{var n;class u{}return(n=u).\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[p.iI.forChild(F),p.iI]}),u})(),M=(()=>{var n;class u{}return(n=u).\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[c.MD,g.YN,s.bv,C,h.q1]}),u})()}}]);