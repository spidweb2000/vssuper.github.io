"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3485],{3485:(C,h,i)=>{i.r(h),i.d(h,{LoginPageModule:()=>P});var p=i(177),u=i(4341),s=i(4742),d=i(8986),c=i(467),e=i(4438),m=i(1626),f=i(369),v=i(671);const L=[{path:"",component:(()=>{var n;class r{constructor(t,o,l,a){this.router=t,this.http=o,this.storage=l,this.authService=a,this.username="",this.password=""}ngOnInit(){var t=this;return(0,c.A)(function*(){yield t.storage.create()})()}onLogin(){this.http.post("http://localhost:3000/api/login",{username:this.username,password:this.password}).subscribe(o=>{"admin"===this.username&&"admin"===this.password?this.authService.isAdmin(!0):this.authService.userAccess(this.username),o.auth&&(this.authService.setLoginStatus(!0),this.storage.set("token",o.token),this.router.navigate(["/customer-data"]))},o=>{console.error("Login failed",o),this.authService.prompt("No user found."==o.error?"\u7528\u6237\u540d\u9519\u8bef":"Invalid password."==o.error?"\u5bc6\u7801\u9519\u8bef":"\u767b\u5f55\u5931\u8d25!")})}}return(n=r).\u0275fac=function(t){return new(t||n)(e.rXU(d.Ix),e.rXU(m.Qq),e.rXU(f.w),e.rXU(v.u))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-login"]],decls:16,vars:2,consts:[["color","primary"],[1,"ion-padding"],[3,"ngSubmit"],["position","floating"],["type","text","name","username","required","",3,"ngModelChange","ngModel"],["type","password","name","password","required","",3,"ngModelChange","ngModel"],["expand","full","type","submit"]],template:function(t,o){1&t&&(e.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),e.EFF(3,"\u767b\u5f55"),e.k0s()()(),e.j41(4,"ion-content",1)(5,"form",2),e.bIt("ngSubmit",function(){return o.onLogin()}),e.j41(6,"ion-item")(7,"ion-label",3),e.EFF(8,"\u7528\u6237\u540d"),e.k0s(),e.j41(9,"ion-input",4),e.mxI("ngModelChange",function(a){return e.DH7(o.username,a)||(o.username=a),a}),e.k0s()(),e.j41(10,"ion-item")(11,"ion-label",3),e.EFF(12,"\u5bc6\u7801"),e.k0s(),e.j41(13,"ion-input",5),e.mxI("ngModelChange",function(a){return e.DH7(o.password,a)||(o.password=a),a}),e.k0s()(),e.j41(14,"ion-button",6),e.EFF(15,"\u767b\u5f55"),e.k0s()()()),2&t&&(e.R7$(9),e.R50("ngModel",o.username),e.R7$(4),e.R50("ngModel",o.password))},dependencies:[u.qT,u.BC,u.cb,u.YS,u.vS,u.cV,s.Jm,s.W9,s.eU,s.$w,s.uz,s.he,s.BC,s.ai,s.Gw]}),r})()}];let M=(()=>{var n;class r{}return(n=r).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[d.iI.forChild(L),d.iI]}),r})(),P=(()=>{var n;class r{}return(n=r).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[p.MD,u.YN,s.bv,M,m.q1]}),r})()}}]);